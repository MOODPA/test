exports.id=886,exports.ids=[886],exports.modules={2198:(e,t,o)=>{"use strict";o.d(t,{N:()=>s});var a=o(8732),r=o(2015);let n=(0,r.createContext)({isDarkMode:!1,toggleTheme:()=>{}}),s=({children:e})=>{let[t,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{"dark"===localStorage.getItem("mood-pa-theme")&&(o(!0),document.documentElement.classList.add("dark"))},[]),(0,a.jsx)(n.Provider,{value:{isDarkMode:t,toggleTheme:()=>{o(e=>{let t=!e;return localStorage.setItem("mood-pa-theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),t})}},children:e})}},2768:()=>{},6023:(e,t,o)=>{"use strict";o.a(e,async(e,a)=>{try{o.d(t,{A:()=>l});var r=o(2015),n=o(2537),s=o(5515);o(9281);var i=e([n]);function l(){let[e,t]=(0,r.useState)(!1),[o,a]=(0,r.useState)(null),i=(0,n.getStorage)(),l=async e=>{try{t(!0),a(null);let o=new s.jsPDF({orientation:"portrait",unit:"mm",format:"a4"});if(o.setFontSize(18),o.setTextColor(0,51,153),o.text("MOOD.PA - Relat\xf3rio de An\xe1lise",105,20,{align:"center"}),o.setFontSize(14),o.setTextColor(0,0,0),o.text(`Projeto: ${e.nome}`,20,35),o.setFontSize(10),o.text(`Tipo: ${e.tipo.charAt(0).toUpperCase()+e.tipo.slice(1)}`,20,45),o.text(`\xc1rea do Terreno: ${e.areaTerreno}m\xb2`,20,50),o.text(`\xc1rea Constru\xedda: ${e.areaConstruida}m\xb2`,20,55),o.text(`Data da An\xe1lise: ${x(e.analise?.data)}`,20,60),o.setFontSize(12),o.text(`Status: ${e.status}`,20,70),o.text(`Conformidade: ${e.conformidade}`,20,75),e.analise&&e.analise.parametros){o.setFontSize(14),o.setTextColor(0,51,153),o.text("Par\xe2metros Urban\xedsticos",20,90),o.setFontSize(10),o.setTextColor(0,0,0);let t=e.analise.parametros;o.text(`Recuo Frontal: ${t.recuoFrontal.valor}m`,20,100),o.text(`M\xednimo Exigido: ${t.recuoFrontal.minimo}m`,80,100),o.text(`Conformidade: ${t.recuoFrontal.conforme?"Conforme":"N\xe3o Conforme"}`,140,100),o.text(`Recuo Lateral: ${t.recuoLateral.valor}m`,20,105),o.text(`M\xednimo Exigido: ${t.recuoLateral.minimo}m`,80,105),o.text(`Conformidade: ${t.recuoLateral.conforme?"Conforme":"N\xe3o Conforme"}`,140,105),o.text(`Taxa de Ocupa\xe7\xe3o: ${t.taxaOcupacao.valor}%`,20,110),o.text(`M\xe1ximo Permitido: ${t.taxaOcupacao.maximo}%`,80,110),o.text(`Conformidade: ${t.taxaOcupacao.conforme?"Conforme":"N\xe3o Conforme"}`,140,110),o.text(`Taxa de Permeabilidade: ${t.taxaPermeabilidade.valor}%`,20,115),o.text(`M\xednimo Exigido: ${t.taxaPermeabilidade.minimo}%`,80,115),o.text(`Conformidade: ${t.taxaPermeabilidade.conforme?"Conforme":"N\xe3o Conforme"}`,140,115),o.text(`Coef. Aproveitamento: ${t.coeficienteAproveitamento.valor}`,20,120),o.text(`M\xe1ximo Permitido: ${t.coeficienteAproveitamento.maximo}`,80,120),o.text(`Conformidade: ${t.coeficienteAproveitamento.conforme?"Conforme":"N\xe3o Conforme"}`,140,120)}if(e.analise&&e.analise.representacaoGrafica){o.setFontSize(14),o.setTextColor(0,51,153),o.text("Representa\xe7\xe3o Gr\xe1fica",20,135),o.setFontSize(10),o.setTextColor(0,0,0);let t=e.analise.representacaoGrafica;o.text("Elementos Obrigat\xf3rios:",20,145),o.text(`Planta Baixa: ${t.plantaBaixa?"Presente":"Ausente"}`,40,150),o.text(`Cortes: ${t.cortes?"Presente":"Ausente"}`,40,155),o.text(`Fachadas: ${t.fachadas?"Presente":"Ausente"}`,40,160),o.text(`Implanta\xe7\xe3o: ${t.implantacao?"Presente":"Ausente"}`,40,165),o.text("Elementos Complementares:",110,145),o.text(`Planta de Cobertura: ${t.cobertura?"Presente":"Ausente"}`,130,150),o.text(`Cotas e N\xedveis: ${t.cotasNiveis?"Presente":"Ausente"}`,130,155),o.text(`Escalas: ${t.escalas?"Presente":"Ausente"}`,130,160),o.text(`Indica\xe7\xe3o do Norte: ${t.norte?"Presente":"Ausente"}`,130,165)}e.analise&&e.analise.observacoes&&e.analise.observacoes.length>0&&(o.setFontSize(14),o.setTextColor(0,51,153),o.text("Observa\xe7\xf5es",20,180),o.setFontSize(10),o.setTextColor(0,0,0),e.analise.observacoes.forEach((e,t)=>{o.text(`${t+1}. ${e}`,20,190+5*t),190+5*t>270&&(o.addPage(),o.setFontSize(14),o.setTextColor(0,51,153),o.text("Observa\xe7\xf5es (continua\xe7\xe3o)",20,20),o.setFontSize(10),o.setTextColor(0,0,0))}));let r=o.internal.getNumberOfPages();for(let e=1;e<=r;e++)o.setPage(e),o.setFontSize(8),o.setTextColor(100,100,100),o.text(`MOOD.PA - Analisador T\xe9cnico de Projetos Arquitet\xf4nicos | P\xe1gina ${e} de ${r}`,105,290,{align:"center"}),o.text(`Relat\xf3rio gerado em ${new Date().toLocaleDateString("pt-BR")} \xe0s ${new Date().toLocaleTimeString("pt-BR")}`,105,295,{align:"center"});for(let e=1;e<=r;e++)o.setPage(e),o.setFontSize(60),o.setTextColor(230,230,230),o.text("MOOD.PA",105,150,{align:"center",angle:45});let l=o.output("blob"),c=(0,n.ref)(i,`relatorios/${e.id}_${Date.now()}.pdf`);await (0,n.uploadBytes)(c,l);let d=await (0,n.getDownloadURL)(c);return window.open(d,"_blank"),{success:!0,message:"Relat\xf3rio exportado com sucesso!",url:d}}catch(e){return console.error("Erro ao exportar relat\xf3rio:",e),a("Erro ao exportar relat\xf3rio. Tente novamente."),{success:!1,message:"Erro ao exportar relat\xf3rio. Tente novamente."}}finally{t(!1)}},c=async e=>{try{t(!0),a(null);let o={nome:e.nome,tipo:e.tipo,areaTerreno:e.areaTerreno,areaConstruida:e.areaConstruida,status:e.status,conformidade:e.conformidade,parametros:e.analise?.parametros,representacaoGrafica:e.analise?.representacaoGrafica,observacoes:e.analise?.observacoes},r=JSON.stringify(o,null,2),s=new Blob([r],{type:"application/json"}),l=(0,n.ref)(i,`relatorios/${e.id}_${Date.now()}.json`);await (0,n.uploadBytes)(l,s);let c=await (0,n.getDownloadURL)(l),d=document.createElement("a");return d.href=c,d.download=`relatorio_${e.id}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),{success:!0,message:"Dados exportados com sucesso!",url:c}}catch(e){return console.error("Erro ao exportar dados:",e),a("Erro ao exportar dados. Tente novamente."),{success:!1,message:"Erro ao exportar dados. Tente novamente."}}finally{t(!1)}},d=async e=>{try{t(!0),a(null);let o=new s.jsPDF({orientation:"landscape",unit:"mm",format:"a4"});o.setFontSize(18),o.setTextColor(0,51,153),o.text("MOOD.PA - Relat\xf3rio Comparativo",150,20,{align:"center"}),o.setFontSize(12),o.setTextColor(0,0,0),o.text("Compara\xe7\xe3o de Projetos",20,35),o.setFontSize(10),o.setTextColor(0,0,0),o.setFillColor(240,240,240),o.rect(20,45,250,10,"F"),o.text("Nome do Projeto",25,51),o.text("\xc1rea Terreno",100,51),o.text("\xc1rea Constru\xedda",130,51),o.text("Taxa Ocupa\xe7\xe3o",165,51),o.text("Permeabilidade",200,51),o.text("Conformidade",235,51),e.forEach((e,t)=>{let a=55+10*t;t%2==0&&(o.setFillColor(250,250,250),o.rect(20,a,250,10,"F")),o.text(e.nome.substring(0,30),25,a+6),o.text(`${e.areaTerreno}m\xb2`,100,a+6),o.text(`${e.areaConstruida}m\xb2`,130,a+6);let r=e.analise?.parametros?.taxaOcupacao?.valor||Math.round(e.areaConstruida/e.areaTerreno*100);o.text(`${r}%`,165,a+6);let n=e.analise?.parametros?.taxaPermeabilidade?.valor||"N/A";o.text(`${n}${"N/A"!==n?"%":""}`,200,a+6),o.text(e.conformidade||"Pendente",235,a+6)}),o.setFontSize(14),o.setTextColor(0,51,153),o.text("An\xe1lise Comparativa",150,120,{align:"center"}),o.setDrawColor(0,0,0),o.line(50,200,250,200),o.line(50,200,50,130),o.setFontSize(8),o.text("Projetos",150,210),o.text("Taxa de Ocupa\xe7\xe3o (%)",40,165,{angle:90});let r=200/(2*e.length);e.forEach((e,t)=>{let a=e.analise?.parametros?.taxaOcupacao?.valor||Math.round(e.areaConstruida/e.areaTerreno*100),n=.7*a,s=50+t*r*2+r,i=200-n;o.setFillColor(0,102,204),o.rect(s,i,r,n,"F"),o.setFontSize(8),o.text(`${a}%`,s+r/2,i-5,{align:"center"});let l=e.nome.substring(0,10)+(e.nome.length>10?"...":"");o.text(l,s+r/2,205,{align:"center"})}),o.setFontSize(8),o.setTextColor(100,100,100),o.text(`MOOD.PA - Analisador T\xe9cnico de Projetos Arquitet\xf4nicos | Relat\xf3rio gerado em ${new Date().toLocaleDateString("pt-BR")}`,150,290,{align:"center"});let l=o.output("blob"),c=(0,n.ref)(i,`relatorios/comparativo_${Date.now()}.pdf`);await (0,n.uploadBytes)(c,l);let d=await (0,n.getDownloadURL)(c);return window.open(d,"_blank"),{success:!0,message:"Relat\xf3rio comparativo gerado com sucesso!",url:d}}catch(e){return console.error("Erro ao gerar relat\xf3rio comparativo:",e),a("Erro ao gerar relat\xf3rio comparativo. Tente novamente."),{success:!1,message:"Erro ao gerar relat\xf3rio comparativo. Tente novamente."}}finally{t(!1)}},m=async e=>{try{t(!0),a(null);let o=e.length,r=e.filter(e=>"Total"===e.conformidade).length,l=e.filter(e=>"Parcial"===e.conformidade).length,c=e.filter(e=>"Pendente"===e.conformidade).length,d=r/o*100,m=l/o*100,x=c/o*100,u=e.reduce((e,t)=>e+t.areaTerreno,0),p=e.reduce((e,t)=>e+t.areaConstruida,0),f=u/o,g=p/o,h=g/f*100,C=new s.jsPDF({orientation:"portrait",unit:"mm",format:"a4"});C.setFontSize(18),C.setTextColor(0,51,153),C.text("MOOD.PA - Relat\xf3rio Estat\xedstico",105,20,{align:"center"}),C.setFontSize(14),C.setTextColor(0,0,0),C.text("Estat\xedsticas Gerais",20,35),C.setFontSize(10),C.text(`Total de Projetos Analisados: ${o}`,20,45),C.text(`Projetos em Conformidade Total: ${r} (${d.toFixed(1)}%)`,20,50),C.text(`Projetos em Conformidade Parcial: ${l} (${m.toFixed(1)}%)`,20,55),C.text(`Projetos Pendentes: ${c} (${x.toFixed(1)}%)`,20,60),C.setFontSize(14),C.text("M\xe9dias",20,75),C.setFontSize(10),C.text(`\xc1rea M\xe9dia de Terreno: ${f.toFixed(2)}m\xb2`,20,85),C.text(`\xc1rea M\xe9dia Constru\xedda: ${g.toFixed(2)}m\xb2`,20,90),C.text(`Taxa M\xe9dia de Ocupa\xe7\xe3o: ${h.toFixed(2)}%`,20,95),C.setFontSize(14),C.setTextColor(0,51,153),C.text("Distribui\xe7\xe3o de Conformidade",105,115,{align:"center"});let F=d/100*2*Math.PI;C.setFillColor(0,153,51),C.circle(105,150,40,"F"),m>0&&(C.setFillColor(255,204,0),C.ellipse(105,150,40,40,{start:F,end:F+m/100*2*Math.PI},"F")),x>0&&(C.setFillColor(204,204,204),C.ellipse(105,150,40,40,{start:F+m/100*2*Math.PI,end:2*Math.PI},"F")),C.setFontSize(10),C.setTextColor(0,0,0),C.setFillColor(0,153,51),C.rect(20,200,10,10,"F"),C.text(`Conformidade Total (${d.toFixed(1)}%)`,35,207),C.setFillColor(255,204,0),C.rect(20,215,10,10,"F"),C.text(`Conformidade Parcial (${m.toFixed(1)}%)`,35,222),C.setFillColor(204,204,204),C.rect(20,230,10,10,"F"),C.text(`Pendentes (${x.toFixed(1)}%)`,35,237),C.setFontSize(8),C.setTextColor(100,100,100),C.text(`MOOD.PA - Analisador T\xe9cnico de Projetos Arquitet\xf4nicos | Relat\xf3rio gerado em ${new Date().toLocaleDateString("pt-BR")}`,105,290,{align:"center"});let v=C.output("blob"),$=(0,n.ref)(i,`relatorios/estatistico_${Date.now()}.pdf`);await (0,n.uploadBytes)($,v);let T=await (0,n.getDownloadURL)($);return window.open(T,"_blank"),{success:!0,message:"Relat\xf3rio estat\xedstico gerado com sucesso!",url:T}}catch(e){return console.error("Erro ao gerar relat\xf3rio estat\xedstico:",e),a("Erro ao gerar relat\xf3rio estat\xedstico. Tente novamente."),{success:!1,message:"Erro ao gerar relat\xf3rio estat\xedstico. Tente novamente."}}finally{t(!1)}},x=e=>e?e instanceof Date?e.toLocaleDateString("pt-BR"):e.seconds?new Date(1e3*e.seconds).toLocaleDateString("pt-BR"):e:new Date().toLocaleDateString("pt-BR");return{loading:e,error:o,exportarPDF:l,exportarExcel:c,gerarRelatorioComparativo:d,gerarRelatorioEstatistico:m}}n=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})},6647:(e,t,o)=>{"use strict";o.a(e,async(e,a)=>{try{o.d(t,{A:()=>l});var r=o(2015),n=o(4337),s=o(2537),i=e([n,s]);function l(){let[e,t]=(0,r.useState)(!1),[o,a]=(0,r.useState)(null),i=(0,n.getFirestore)(),l=(0,s.getStorage)(),c=async e=>{try{t(!0),a(null);let o=(0,n.query)((0,n.collection)(i,"projetos"),(0,n.where)("usuarioId","==",e)),r=await (0,n.getDocs)(o),s=[];return r.forEach(e=>{s.push({id:e.id,...e.data()})}),{success:!0,projetos:s}}catch(e){return console.error("Erro ao obter projetos:",e),a("Erro ao carregar projetos. Tente novamente."),{success:!1,message:"Erro ao carregar projetos."}}finally{t(!1)}},d=async e=>{try{t(!0),a(null);let o=await (0,n.getDoc)((0,n.doc)(i,"projetos",e));if(!o.exists())return a("Projeto n\xe3o encontrado."),{success:!1,message:"Projeto n\xe3o encontrado."};{let t=(0,n.query)((0,n.collection)(i,"analises"),(0,n.where)("projetoId","==",e)),a=await (0,n.getDocs)(t),r=null;return a.empty||a.forEach(e=>{r={id:e.id,...e.data()}}),{success:!0,projeto:{id:o.id,...o.data(),analise:r}}}}catch(e){return console.error("Erro ao obter projeto:",e),a("Erro ao carregar projeto. Tente novamente."),{success:!1,message:"Erro ao carregar projeto."}}finally{t(!1)}},m=async(e,o=[])=>{try{t(!0),a(null);let r=[];if(o&&o.length>0)for(let e of o){let t=(0,s.ref)(l,`projetos/${Date.now()}_${e.name}`);await (0,s.uploadBytes)(t,e);let o=await (0,s.getDownloadURL)(t);r.push(o)}let c={...e,data:new Date,status:"Em An\xe1lise",conformidade:"Pendente",arquivosUrls:r},d=await (0,n.addDoc)((0,n.collection)(i,"projetos"),c),m=await p(d.id,c);return{success:!0,projeto:{id:d.id,...c,analise:m}}}catch(e){return console.error("Erro ao adicionar projeto:",e),a("Erro ao adicionar projeto. Tente novamente."),{success:!1,message:"Erro ao adicionar projeto."}}finally{t(!1)}},x=async(e,o,r=[])=>{try{t(!0),a(null);let c=await (0,n.getDoc)((0,n.doc)(i,"projetos",e));if(!c.exists())return a("Projeto n\xe3o encontrado."),{success:!1,message:"Projeto n\xe3o encontrado."};let d=c.data(),m=[...d.arquivosUrls||[]];if(r&&r.length>0)for(let e of r){let t=(0,s.ref)(l,`projetos/${Date.now()}_${e.name}`);await (0,s.uploadBytes)(t,e);let o=await (0,s.getDownloadURL)(t);m.push(o)}let x={...o,arquivosUrls:m};if(await (0,n.updateDoc)((0,n.doc)(i,"projetos",e),x),o.areaTerreno||o.areaConstruida){let t={...d,...o,arquivosUrls:m};await p(e,t)}return{success:!0}}catch(e){return console.error("Erro ao atualizar projeto:",e),a("Erro ao atualizar projeto. Tente novamente."),{success:!1,message:"Erro ao atualizar projeto."}}finally{t(!1)}},u=async e=>{try{t(!0),a(null);let o=(0,n.query)((0,n.collection)(i,"analises"),(0,n.where)("projetoId","==",e)),r=await (0,n.getDocs)(o),s=i.batch();return r.forEach(e=>{s.delete(e.ref)}),s.delete((0,n.doc)(i,"projetos",e)),await s.commit(),{success:!0}}catch(e){return console.error("Erro ao remover projeto:",e),a("Erro ao remover projeto. Tente novamente."),{success:!1,message:"Erro ao remover projeto."}}finally{t(!1)}},p=async(e,t)=>{try{let o={valor:parseFloat((6*Math.random()+2).toFixed(1)),minimo:5,conforme:!1};o.conforme=o.valor>=o.minimo;let a={valor:parseFloat((3*Math.random()+.5).toFixed(1)),minimo:1.5,conforme:!1};a.conforme=a.valor>=a.minimo;let r={valor:Math.round(t.areaConstruida/t.areaTerreno*100),maximo:70,conforme:!1};r.conforme=r.valor<=r.maximo;let s={valor:Math.round(30*Math.random()+10),minimo:20,conforme:!1};s.conforme=s.valor>=s.minimo;let l={valor:parseFloat((t.areaConstruida/t.areaTerreno).toFixed(2)),maximo:1.5,conforme:!1};l.conforme=l.valor<=l.maximo;let c={plantaBaixa:Math.random()>.1,cortes:Math.random()>.2,fachadas:Math.random()>.2,implantacao:Math.random()>.1,cobertura:Math.random()>.3,cotasNiveis:Math.random()>.3,escalas:Math.random()>.2,norte:Math.random()>.4},d=[];o.conforme||d.push("O recuo frontal est\xe1 abaixo do m\xednimo exigido pela legisla\xe7\xe3o municipal."),a.conforme||d.push("O recuo lateral est\xe1 abaixo do m\xednimo exigido pela legisla\xe7\xe3o municipal."),r.conforme||d.push("A taxa de ocupa\xe7\xe3o est\xe1 acima do m\xe1ximo permitido pela legisla\xe7\xe3o municipal."),s.conforme||d.push("A taxa de permeabilidade est\xe1 abaixo do m\xednimo exigido."),l.conforme||d.push("O coeficiente de aproveitamento est\xe1 acima do m\xe1ximo permitido pela legisla\xe7\xe3o municipal."),c.plantaBaixa||d.push("Falta planta baixa conforme exigido nas normas de representa\xe7\xe3o."),c.cortes||d.push("Faltam cortes conforme exigido nas normas de representa\xe7\xe3o."),c.fachadas||d.push("Faltam fachadas conforme exigido nas normas de representa\xe7\xe3o."),c.implantacao||d.push("Falta implanta\xe7\xe3o conforme exigido nas normas de representa\xe7\xe3o."),c.cobertura||d.push("Falta planta de cobertura conforme exigido nas normas de representa\xe7\xe3o."),c.cotasNiveis||d.push("Faltam cotas e n\xedveis conforme exigido nas normas de representa\xe7\xe3o."),c.escalas||d.push("Faltam escalas conforme exigido nas normas de representa\xe7\xe3o."),c.norte||d.push("Falta indica\xe7\xe3o do norte na implanta\xe7\xe3o.");let m=o.conforme&&a.conforme&&r.conforme&&s.conforme&&l.conforme,x=c.plantaBaixa&&c.cortes&&c.fachadas&&c.implantacao,u=m&&x?"Total":"Parcial",p={projetoId:e,data:new Date,parametros:{recuoFrontal:o,recuoLateral:a,taxaOcupacao:r,taxaPermeabilidade:s,coeficienteAproveitamento:l},representacaoGrafica:c,observacoes:d,conformidade:u},f=await (0,n.addDoc)((0,n.collection)(i,"analises"),p);return await (0,n.updateDoc)((0,n.doc)(i,"projetos",e),{status:"An\xe1lise Conclu\xedda",conformidade:u}),{id:f.id,...p}}catch(e){return console.error("Erro ao iniciar an\xe1lise:",e),null}};return{loading:e,error:o,getProjetos:c,getProjetoPorId:d,adicionarProjeto:m,atualizarProjeto:x,removerProjeto:u,iniciarAnalise:p}}[n,s]=i.then?(await i)():i,a()}catch(e){a(e)}})},7522:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});var a=o(8732),r=o(2198);function n({Component:e,pageProps:t}){return(0,a.jsx)(r.N,{children:(0,a.jsx)(e,{...t})})}o(2768)}};