(()=>{var e={};e.id=309,e.ids=[220,309,636],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2015:e=>{"use strict";e.exports=require("react")},2198:(e,t,r)=>{"use strict";r.d(t,{D:()=>c,N:()=>i});var a=r(8732),s=r(2015);let o=(0,s.createContext)({isDarkMode:!1,toggleTheme:()=>{}}),i=({children:e})=>{let[t,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{"dark"===localStorage.getItem("mood-pa-theme")&&(r(!0),document.documentElement.classList.add("dark"))},[]),(0,a.jsx)(o.Provider,{value:{isDarkMode:t,toggleTheme:()=>{r(e=>{let t=!e;return localStorage.setItem("mood-pa-theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),t})}},children:e})},c=()=>(0,s.useContext)(o)},2768:()=>{},3373:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{A:()=>m});var s=r(6551),o=r(6958),i=r(4337),c=e([s,o,i]);[s,o,i]=c.then?(await c)():c;let n={apiKey:process.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:process.env.NEXT_PUBLIC_FIREBASE_APP_ID},d=(0,s.initializeApp)(n),u=(0,o.getAuth)(d),l=(0,i.getFirestore)(d),m=function(){let e=async(e,t)=>{try{let r=(await (0,o.signInWithEmailAndPassword)(u,e,t)).user,a=await (0,i.getDoc)((0,i.doc)(l,"users",r.uid));if(!a.exists())return await (0,o.signOut)(u),{success:!1,message:"Dados de usu\xe1rio n\xe3o encontrados."};{let e=a.data();if(!e.aprovado)return await (0,o.signOut)(u),{success:!1,message:"Sua conta ainda n\xe3o foi aprovada por um administrador."};return await (0,i.updateDoc)((0,i.doc)(l,"users",r.uid),{ultimoAcesso:new Date}),{success:!0,user:{id:r.uid,email:r.email,nome:e.nome,perfil:e.perfil}}}}catch(t){console.error("Erro no login:",t);let e="Erro ao fazer login. Tente novamente.";return"auth/user-not-found"===t.code||"auth/wrong-password"===t.code?e="Email ou senha incorretos.":"auth/too-many-requests"===t.code&&(e="Muitas tentativas de login. Tente novamente mais tarde."),{success:!1,message:e}}},t=async(e,t,r)=>{try{let a=(0,i.query)((0,i.collection)(l,"users"),(0,i.where)("email","==",t));if(!(await (0,i.getDocs)(a)).empty)return{success:!1,message:"Este email j\xe1 est\xe1 em uso."};let s=(await (0,o.createUserWithEmailAndPassword)(u,t,r)).user;return await (0,i.setDoc)((0,i.doc)(l,"users",s.uid),{id:s.uid,nome:e,email:t,perfil:"usuario",dataCriacao:new Date,ultimoAcesso:new Date,aprovado:!1}),await (0,o.signOut)(u),{success:!0,message:"Registro realizado com sucesso! Sua conta ser\xe1 analisada por um administrador."}}catch(t){console.error("Erro no registro:",t);let e="Erro ao registrar. Tente novamente.";return"auth/email-already-in-use"===t.code?e="Este email j\xe1 est\xe1 em uso.":"auth/weak-password"===t.code?e="A senha \xe9 muito fraca. Use pelo menos 6 caracteres.":"auth/invalid-email"===t.code&&(e="Email inv\xe1lido."),{success:!1,message:e}}},r=async()=>{try{return await (0,o.signOut)(u),{success:!0}}catch(e){return console.error("Erro no logout:",e),{success:!1,message:"Erro ao fazer logout. Tente novamente."}}},a=async()=>{try{let e=(0,i.query)((0,i.collection)(l,"users"),(0,i.where)("aprovado","==",!1)),t=await (0,i.getDocs)(e),r=[];return t.forEach(e=>{r.push(e.data())}),{success:!0,usuarios:r}}catch(e){return console.error("Erro ao buscar usu\xe1rios pendentes:",e),{success:!1,message:"Erro ao buscar usu\xe1rios pendentes."}}},s=async e=>{try{return await (0,i.updateDoc)((0,i.doc)(l,"users",e),{aprovado:!0}),{success:!0}}catch(e){return console.error("Erro ao aprovar usu\xe1rio:",e),{success:!1,message:"Erro ao aprovar usu\xe1rio."}}},c=async e=>{try{return await (0,i.updateDoc)((0,i.doc)(l,"users",e),{aprovado:!1,rejeitado:!0}),{success:!0}}catch(e){return console.error("Erro ao rejeitar usu\xe1rio:",e),{success:!1,message:"Erro ao rejeitar usu\xe1rio."}}};return{login:e,registrar:t,logout:r,getUsuariosPendentes:a,aprovarUsuario:s,rejeitarUsuario:c}};a()}catch(e){a(e)}})},3873:e=>{"use strict";e.exports=require("path")},4337:e=>{"use strict";e.exports=import("firebase/firestore")},6551:e=>{"use strict";e.exports=import("firebase/app")},6958:e=>{"use strict";e.exports=import("firebase/auth")},7522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(8732),s=r(2198);function o({Component:e,pageProps:t}){return(0,a.jsx)(s.N,{children:(0,a.jsx)(e,{...t})})}r(2768)},7535:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>n});var s=r(8732),o=r(2015),i=r(3373),c=e([i]);function n(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[c,n]=(0,o.useState)({type:"",text:""}),d=(0,i.A)(),u=async r=>{try{a(!0);let s=await d.aprovarUsuario(r);s.success?(n({type:"success",text:"Usu\xe1rio aprovado com sucesso!"}),t(e.filter(e=>e.id!==r))):n({type:"error",text:s.message})}catch(e){console.error("Erro ao aprovar usu\xe1rio:",e),n({type:"error",text:"Erro ao aprovar usu\xe1rio."})}finally{a(!1)}},l=async r=>{try{a(!0);let s=await d.rejeitarUsuario(r);s.success?(n({type:"success",text:"Usu\xe1rio rejeitado com sucesso!"}),t(e.filter(e=>e.id!==r))):n({type:"error",text:s.message})}catch(e){console.error("Erro ao rejeitar usu\xe1rio:",e),n({type:"error",text:"Erro ao rejeitar usu\xe1rio."})}finally{a(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Painel de Administra\xe7\xe3o"}),c.text&&(0,s.jsx)("div",{className:`mt-4 p-3 rounded ${"error"===c.type?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:c.text}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Solicita\xe7\xf5es de Registro Pendentes"}),r?(0,s.jsx)("div",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Carregando..."}):0===e.length?(0,s.jsx)("div",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"N\xe3o h\xe1 solicita\xe7\xf5es pendentes."}):(0,s.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Nome"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Email"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Data de Registro"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-700 dark:divide-gray-600",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.nome}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.email}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:new Date(1e3*e.dataCriacao.seconds).toLocaleDateString("pt-BR")}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>u(e.id),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 mr-4",disabled:r,children:"Aprovar"}),(0,s.jsx)("button",{onClick:()=>l(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",disabled:r,children:"Rejeitar"})]})]},e.id))})]})})]})]})})})}i=(c.then?(await c)():c)[0],a()}catch(e){a(e)}})},8399:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>m,getServerSideProps:()=>x,getStaticPaths:()=>g,getStaticProps:()=>p,reportWebVitals:()=>y,routeModule:()=>S,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>E,unstable_getStaticProps:()=>v});var s=r(3885),o=r(237),i=r(1413),c=r(9616),n=r.n(c),d=r(7522),u=r(7535),l=e([u]);u=(l.then?(await l)():l)[0];let m=(0,i.M)(u,"default"),p=(0,i.M)(u,"getStaticProps"),g=(0,i.M)(u,"getStaticPaths"),x=(0,i.M)(u,"getServerSideProps"),h=(0,i.M)(u,"config"),y=(0,i.M)(u,"reportWebVitals"),v=(0,i.M)(u,"unstable_getStaticProps"),E=(0,i.M)(u,"unstable_getStaticPaths"),f=(0,i.M)(u,"unstable_getStaticParams"),P=(0,i.M)(u,"unstable_getServerProps"),w=(0,i.M)(u,"unstable_getServerSideProps"),S=new s.PagesRouteModule({definition:{kind:o.A.PAGES,page:"/admin",pathname:"/admin",bundlePath:"",filename:""},components:{App:d.default,Document:n()},userland:u});a()}catch(e){a(e)}})},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[616],()=>r(8399));module.exports=a})();