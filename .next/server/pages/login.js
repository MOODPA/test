(()=>{var e={};e.id=295,e.ids=[220,295,636],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2015:e=>{"use strict";e.exports=require("react")},2198:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,N:()=>n});var a=r(8732),s=r(2015);let o=(0,s.createContext)({isDarkMode:!1,toggleTheme:()=>{}}),n=({children:e})=>{let[t,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{"dark"===localStorage.getItem("mood-pa-theme")&&(r(!0),document.documentElement.classList.add("dark"))},[]),(0,a.jsx)(o.Provider,{value:{isDarkMode:t,toggleTheme:()=>{r(e=>{let t=!e;return localStorage.setItem("mood-pa-theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),t})}},children:e})},i=()=>(0,s.useContext)(o)},2487:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>m,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>g,reportWebVitals:()=>y,routeModule:()=>j,unstable_getServerProps:()=>E,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var s=r(3885),o=r(237),n=r(1413),i=r(9616),c=r.n(i),u=r(7522),d=r(3273),l=e([d]);d=(l.then?(await l)():l)[0];let m=(0,n.M)(d,"default"),g=(0,n.M)(d,"getStaticProps"),p=(0,n.M)(d,"getStaticPaths"),x=(0,n.M)(d,"getServerSideProps"),h=(0,n.M)(d,"config"),y=(0,n.M)(d,"reportWebVitals"),b=(0,n.M)(d,"unstable_getStaticProps"),f=(0,n.M)(d,"unstable_getStaticPaths"),v=(0,n.M)(d,"unstable_getStaticParams"),E=(0,n.M)(d,"unstable_getServerProps"),w=(0,n.M)(d,"unstable_getServerSideProps"),j=new s.PagesRouteModule({definition:{kind:o.A.PAGES,page:"/login",pathname:"/login",bundlePath:"",filename:""},components:{App:u.default,Document:c()},userland:d});a()}catch(e){a(e)}})},2768:()=>{},3273:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>c});var s=r(8732),o=r(2015),n=r(3373),i=e([n]);function c(){let[e,t]=(0,o.useState)(!0),[r,a]=(0,o.useState)(""),[i,c]=(0,o.useState)(""),[u,d]=(0,o.useState)(""),[l,m]=(0,o.useState)(!1),[g,p]=(0,o.useState)({type:"",text:""}),x=(0,n.A)(),h=async s=>{s.preventDefault(),m(!0),p({type:"",text:""});try{if(e){let e=await x.login(r,i);e.success?window.location.href="/projetos":p({type:"error",text:e.message})}else{if(!u||!r||!i){p({type:"error",text:"Todos os campos s\xe3o obrigat\xf3rios."}),m(!1);return}let e=await x.registrar(u,r,i);e.success?(p({type:"success",text:e.message}),d(""),a(""),c(""),t(!0)):p({type:"error",text:e.message})}}catch(e){console.error("Erro:",e),p({type:"error",text:"Ocorreu um erro. Tente novamente."})}m(!1)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8 dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e?"Acesse sua conta":"Crie sua conta"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:e?"Entre para acessar o MOOD.PA":"Registre-se para utilizar o MOOD.PA"})]}),(0,s.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,s.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10 dark:bg-gray-800",children:[g.text&&(0,s.jsx)("div",{className:`mb-4 p-3 rounded ${"error"===g.type?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:g.text}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:h,children:[!e&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{id:"nome",name:"nome",type:"text",autoComplete:"name",required:!0,value:u,onChange:e=>d(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:e=>a(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"senha",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{id:"senha",name:"senha",type:"password",autoComplete:e?"current-password":"new-password",required:!0,value:i,onChange:e=>c(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:l,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${l?"opacity-70 cursor-not-allowed":""}`,children:l?(0,s.jsx)("span",{children:"Processando..."}):(0,s.jsx)("span",{children:e?"Entrar":"Registrar"})})})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:e?"Novo no MOOD.PA?":"J\xe1 tem uma conta?"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("button",{type:"button",onClick:()=>{t(!e),p({type:"",text:""})},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600",children:e?"Criar uma nova conta":"Fazer login com uma conta existente"})})]}),e&&(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Para demonstra\xe7\xe3o, use:"}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-500",children:[(0,s.jsx)("p",{children:"Email: admin@mood-pa.com"}),(0,s.jsx)("p",{children:"Senha: admin123"})]})]})]})})]})}n=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})},3373:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{A:()=>m});var s=r(6551),o=r(6958),n=r(4337),i=e([s,o,n]);[s,o,n]=i.then?(await i)():i;let c={apiKey:process.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:process.env.NEXT_PUBLIC_FIREBASE_APP_ID},u=(0,s.initializeApp)(c),d=(0,o.getAuth)(u),l=(0,n.getFirestore)(u),m=function(){let e=async(e,t)=>{try{let r=(await (0,o.signInWithEmailAndPassword)(d,e,t)).user,a=await (0,n.getDoc)((0,n.doc)(l,"users",r.uid));if(!a.exists())return await (0,o.signOut)(d),{success:!1,message:"Dados de usu\xe1rio n\xe3o encontrados."};{let e=a.data();if(!e.aprovado)return await (0,o.signOut)(d),{success:!1,message:"Sua conta ainda n\xe3o foi aprovada por um administrador."};return await (0,n.updateDoc)((0,n.doc)(l,"users",r.uid),{ultimoAcesso:new Date}),{success:!0,user:{id:r.uid,email:r.email,nome:e.nome,perfil:e.perfil}}}}catch(t){console.error("Erro no login:",t);let e="Erro ao fazer login. Tente novamente.";return"auth/user-not-found"===t.code||"auth/wrong-password"===t.code?e="Email ou senha incorretos.":"auth/too-many-requests"===t.code&&(e="Muitas tentativas de login. Tente novamente mais tarde."),{success:!1,message:e}}},t=async(e,t,r)=>{try{let a=(0,n.query)((0,n.collection)(l,"users"),(0,n.where)("email","==",t));if(!(await (0,n.getDocs)(a)).empty)return{success:!1,message:"Este email j\xe1 est\xe1 em uso."};let s=(await (0,o.createUserWithEmailAndPassword)(d,t,r)).user;return await (0,n.setDoc)((0,n.doc)(l,"users",s.uid),{id:s.uid,nome:e,email:t,perfil:"usuario",dataCriacao:new Date,ultimoAcesso:new Date,aprovado:!1}),await (0,o.signOut)(d),{success:!0,message:"Registro realizado com sucesso! Sua conta ser\xe1 analisada por um administrador."}}catch(t){console.error("Erro no registro:",t);let e="Erro ao registrar. Tente novamente.";return"auth/email-already-in-use"===t.code?e="Este email j\xe1 est\xe1 em uso.":"auth/weak-password"===t.code?e="A senha \xe9 muito fraca. Use pelo menos 6 caracteres.":"auth/invalid-email"===t.code&&(e="Email inv\xe1lido."),{success:!1,message:e}}},r=async()=>{try{return await (0,o.signOut)(d),{success:!0}}catch(e){return console.error("Erro no logout:",e),{success:!1,message:"Erro ao fazer logout. Tente novamente."}}},a=async()=>{try{let e=(0,n.query)((0,n.collection)(l,"users"),(0,n.where)("aprovado","==",!1)),t=await (0,n.getDocs)(e),r=[];return t.forEach(e=>{r.push(e.data())}),{success:!0,usuarios:r}}catch(e){return console.error("Erro ao buscar usu\xe1rios pendentes:",e),{success:!1,message:"Erro ao buscar usu\xe1rios pendentes."}}},s=async e=>{try{return await (0,n.updateDoc)((0,n.doc)(l,"users",e),{aprovado:!0}),{success:!0}}catch(e){return console.error("Erro ao aprovar usu\xe1rio:",e),{success:!1,message:"Erro ao aprovar usu\xe1rio."}}},i=async e=>{try{return await (0,n.updateDoc)((0,n.doc)(l,"users",e),{aprovado:!1,rejeitado:!0}),{success:!0}}catch(e){return console.error("Erro ao rejeitar usu\xe1rio:",e),{success:!1,message:"Erro ao rejeitar usu\xe1rio."}}};return{login:e,registrar:t,logout:r,getUsuariosPendentes:a,aprovarUsuario:s,rejeitarUsuario:i}};a()}catch(e){a(e)}})},3873:e=>{"use strict";e.exports=require("path")},4337:e=>{"use strict";e.exports=import("firebase/firestore")},6551:e=>{"use strict";e.exports=import("firebase/app")},6958:e=>{"use strict";e.exports=import("firebase/auth")},7522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(8732),s=r(2198);function o({Component:e,pageProps:t}){return(0,a.jsx)(s.N,{children:(0,a.jsx)(e,{...t})})}r(2768)},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[616],()=>r(2487));module.exports=a})();